
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Finance Memo Generator</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; max-width: 880px; margin: 30px auto; padding: 0 16px; }
    label { display:block; margin-top: 12px; font-weight: 600; }
    input, textarea { width: 100%; padding: 10px; font-size: 14px; }
    button { margin-top: 16px; padding: 12px 16px; font-size: 15px; cursor: pointer; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .hint { color:#666; font-size: 12px; margin-top: 6px; }
  </style>
</head>
<body>
  <h2>Finance Memorandum Generator (Template Engine)</h2>
  <p class="hint">This version writes directly onto the reference PDF cover (no SVG/HTML layout). Output should match the reference.</p>

  <div class="row">
    <div>
      <label>Company Name (top line)</label>
      <input id="companyName" value="Global Capital Commercial"/>
    </div>
    <div>
      <label>Project Name</label>
      <input id="projectName" value="Warra Project Pty Ltd"/>
    </div>
  </div>

  <div class="row">
    <div>
      <label>Loan Amount</label>
      <input id="loanAmount" value="$50,000,000"/>
    </div>
    <div>
      <label>Date</label>
      <input id="dateText" value="13 January 2026"/>
    </div>
  </div>

  <label>Reference Number</label>
  <input id="referenceNumber" value="PRP.17213"/>

  <details style="margin-top:16px;">
    <summary><b>Optional footer overrides</b></summary>
    <label>Website Line</label>
    <input id="websiteLine" value="globalcapital.com.au"/>
    <label>Footer Line 1</label>
    <textarea id="footerLine1" rows="2">Global Capital Corporation Pty Ltd I ABN 14 097 482 114 I Telephone 612 9222 9100 I info@globalcapital.com.au</textarea>
    <label>Footer Line 2</label>
    <textarea id="footerLine2" rows="2">Level 43 Governor Phillip Tower, 1 Farrer Place Sydney, NSW Australia 2000 I PO Box R196 Royal Exchange NSW 1225</textarea>
  </details>

  <button onclick="generate()">Generate PDF</button>

  <script>
    async function generate() {
      const data = {
        companyName: document.getElementById('companyName').value,
        projectName: document.getElementById('projectName').value,
        loanAmount: document.getElementById('loanAmount').value,
        dateText: document.getElementById('dateText').value,
        referenceNumber: document.getElementById('referenceNumber').value,
        websiteLine: document.getElementById('websiteLine').value,
        footerLine1: document.getElementById('footerLine1').value,
        footerLine2: document.getElementById('footerLine2').value,
      };

      const res = await fetch('/api/generate', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(data)
      });
      if (!res.ok) {
        const t = await res.text();
        alert("Error: " + t);
        return;
      }
      const blob = await res.blob();
      const url = URL.createObjectURL(blob);
      window.open(url, '_blank');
    }
  </script>
</body>
</html>
